<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CheerpJ + MinecraftÂ 1.21.5</title>
  <!-- 1. CheerpJ 4.x loader from LeaningTech CDN -->
  <script src="https://cjrtnc.leaningtech.com/4.0/loader.js"></script>
  <script>
    async function startMinecraft() {
      try {
        console.log('â³ Initializing CheerpJâ€¦');
        await cheerpjInit();

        // 2. Fetch Mojangâ€™s full version manifest
        console.log('â³ Fetching version_manifest.jsonâ€¦');
        const manifest = await fetch('https://launchermeta.mojang.com/mc/game/version_manifest.json')
                              .then(r => r.json());  // 

        // 3. Find the 1.21.5 entry
        const entry = manifest.versions.find(v => v.id === '1.21.5');
        if (!entry) throw new Error('Could not locate version 1.21.5 in manifest');

        // 4. Fetch the 1.21.5 metadata
        console.log(`â³ Fetching metadata for 1.21.5â€¦`);
        const metadata = await fetch(entry.url).then(r => r.json());  // 

        // 5. Extract the client.jar URL
        const clientUrl = metadata.downloads.client.url;
        console.log('ğŸ“¦ client.jar URL:', clientUrl);

        // 6. Launch Minecraftâ€™s main class directly from that URL
        //    The clientâ€™s main entry point is `net.minecraft.client.main.Main`
        console.log('â³ Launching Minecraft clientâ€¦');
        const exitCode = await cheerpjRunMain(
          'net.minecraft.client.main.Main',
          clientUrl
        );
        console.log(`âœ… Minecraft exited with code ${exitCode}`);
      } catch (err) {
        console.error('âŒ Error starting Minecraft:', err);
      }
    }

    window.addEventListener('load', startMinecraft);
  </script>
</head>
<body>
  <h1>Running MinecraftÂ 1.21.5 via CheerpJ</h1>
  <p>
    Check your browserâ€™s developer console for progress logs and any errors.
  </p>
</body>
</html>
